<div class="card">
  <div class="card-body mat-elevation-z8">
      <button (click)="lgModalRequi.show();" placement="bottom" tooltip="Ver Requisición" class="mr-1 mat-elevation-z8"
      [disabled]="element.length == 0" [ngClass]="(element.length == 0) ? 'btn btn-xs disabled':'btn btn-xs btn-warning'">
      <em class="fa fa-eye"></em></button>
    <button (click)="lgModalCom.show()" class="mr-1 btn btn-xs mat-elevation-z8" [disabled]="element.length == 0"
      [ngClass]="element.length == 0 ? 'disabled' : 'btn-dark'" container="body" placement="bottom" tooltip="Comentarios"><em
        class="fa fa-comments-o"></em></button>  
      <button type="button" class="mr-1 btn btn-xs btn-success float-right mat-elevation-z8" (click)="refreshTable()"
      container="body" placement="bottom" tooltip="Actualizar" container="body">
      <em class="icon-refresh"></em>
    </button>
    <button class="mr-1 btn btn-xs btn-info float-right mat-elevation-z8" (click)="clearfilters()" container="body" placement="bottom"
      tooltip="Limpiar Filtros" container="body" >
      <em class="fa fa-eraser"></em>
    </button>
    <button (click)="exportAsXLSX()" class="btn btn-xs btn-success float-right mr-2 mat-elevation-z8" container="body" placement="bottom" tooltip="Descargar" >
        <i class="fa fa-download"></i>
        </button>
    <div class="table-responsive">
        <div class="mt-3 ">
            <span class="text-muted font-weight-bold float-right ml-2 mb-3 text-uppercase">Total posiciones cubiertas
              <span class="badge badge-pill badge-success ml-1">{{totalContratados | numerico}}</span></span>
          </div>
          <span class="text-muted font-weight-bold float-right ml-2 mb-3 text-uppercase">Total de Posiciones activas <span
              class="ml-1 badge badge-pill badge-success">{{totalPos | numerico}}</span></span>
          <span class="text-muted font-weight-bold float-right text-uppercase mb-3">Total de Folios <span
              class="badge badge-pill badge-success ml-1">{{dataInfoRequi.length  | numerico}}</span></span>

      <table class="table border-top">
        <thead>
          <tr>
            <th *ngFor="let column of columnsInfo" ngClass="{{column.className || ''}}">
              <small>{{column.title | uppercase}}</small>
              <!-- <i *ngIf="config && column.sort" class="pull-right fa" (click)="changeSort($event, config)" [ngClass]="{'fa-chevron-down': column.sort === 'desc', 'fa-chevron-up': column.sort === 'asc'}">
                    </i> -->
            </th>
          </tr>
          <tr>
            <th *ngFor="let column of columnsInfo">
              <input *ngIf="column.filtering" placeholder="{{column.filtering.placeholder}}" [ngTableFiltering]="column.filtering"
                (tableChanged)="onChangeTableInfo(config)" class="form-control form-control-sm" id="{{column.name}}_1">
            </th>
          </tr>
        </thead>
        <tbody>
          <ng-scrollbar #scrollable [invertX]="invertX" [invertY]="invertY" [trackX]="false" [trackY]="true"
            [compact]="compact" [shown]="shown" [disableOnBreakpoints]="false" [disabled]="disabled">
            <div>

              <tr class="fontMio" *ngFor="let row of rowsInfo" (click)="onCellClick(row)" [class.bg-primary-light]="row.selected">
                <td class="text-center"> {{row.folio}}</td>
                <td class="text-center"> {{row.vBtra | uppercase}}</td>
                <td class="text-center"> {{row.cliente | uppercase}}</td>
                <td class="text-center"> {{row.fch_limite | date:'dd/MM/yyyy'}} </td>
                <td class="text-center">
                  <small *ngIf="row.estatus.length < 10 else toLength" class="badge badge-pill badge-primary"
                    [class.badge-warning]="row.estatusId  === 4" [class.badge-primary]="row.estatusId  === 5"
                    [class.badge-info]="row.estatusId  === 6 || row.estatusId > 20" [class.badge-success]="row.estatusId  === 7"
                    [class.badge-danger]="row.estatusId  === 8">
                    {{row.estatus | uppercase}}
                  </small>
                  <ng-template #toLength>
                    <small class="badge badge-pill badge-info" [class.badge-warning]="row.estatusId  === 4"
                      [class.badge-primary]="row.estatusId  === 5" [class.badge-info]="row.estatusId  === 6 || row.estatusId > 20"
                      [class.badge-success]="row.estatusId  === 7" [class.badge-danger]="row.estatusId  === 8"
                      placement="bottom" tooltip="{{row.estatus | uppercase}}" container='body'> {{row.estatus |
                      slice:0:8 | uppercase }} ...
                    </small>
                  </ng-template>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.vacantes > 0">
                    {{row.contratados}}/{{row.vacantes}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-success]="row.porcentaje > 0">
                    {{row.porcentaje}} %</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.postulados > 0">{{row.postulados}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.entrevista > 0">{{row.entrevista}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.abandono > 0">{{row.abandono}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.descartados > 0">{{row.descartados}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.enviados > 0">{{row.enviados}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-warning]="row.rechazados > 0">{{row.rechazados}}</small>
                </td>
                <td class="text-center">
                  <small class="badge badge-pill badge-primary" [class.badge-success]="row.contratados > 0">{{row.contratados}}</small>
                </td>
              </tr>
            </div>
          </ng-scrollbar>
        </tbody>
      </table>
      <br />
      <div>
        <pagination *ngIf="config.paging" class="pagination-sm" [(ngModel)]="pageInfo" [totalItems]="lengthInfo"
          [itemsPerPage]="itemsPerPageInfo" [maxSize]="maxSizeInfo" [boundaryLinks]="true" [rotate]="false"
          (pageChanged)="onChangeTableInfo(config, $event)" (numPages)="numPagesInfo = $event">
        </pagination>
      
      </div>

  </div>
</div>

<div bsModal #lgModalCom="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 id="dialog-sizes-name1" class="modal-title pull-left">Vacante: {{vBtra}} {{folio}}</h4>
          <button type="button" class="close pull-right" (click)="lgModalCom.hide()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <comentario-vacante [RequisicionId]="id" [MotivoId]="7"></comentario-vacante>
        </div>
        <div class="modal-footer">
          <button type="button" class="md-1 btn btn-success mat-elevation-z8"
            (click)="lgModalCom.hide();">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

<div bsModal #lgModalRequi="bs-modal" class="modal" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 id="dialog-sizes-name1" class="modal-title pull-left">Informaci&oacute;n de la Vacante</h4>
          <!-- <button placement="right" tooltip="Imprimir Requisición" class="mr-1 btn btn-xs btn-info mat-elevation-z8"
            (click)="childModal.show()">
            <em class="fa fa-print"></em>
          </button> -->
          <button type="button" class="btn btn-xs btn-danger btn-circle float-right" (click)="lgModalRequi.hide()"
            aria-label="Close">
            <i class="fa fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <app-info-vacante [Folios]="folio" [Requisicion]="id"></app-info-vacante>
        </div>
        <div class="modal-footer">
          <button type="button" class="md-1 btn btn-xs btn-danger mat-elevation-z8"
            (click)="lgModalRequi.hide()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
