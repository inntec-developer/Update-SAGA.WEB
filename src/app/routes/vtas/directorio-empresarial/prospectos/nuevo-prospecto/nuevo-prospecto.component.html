<div class="content-heading">
  <div>
    Agregar Nuevo Prospecto
  </div>
  <!-- Breadcrumb right aligned-->
  <ol class="breadcrumb ml-auto">
    <li class="breadcrumb-item">
      <a [routerLink]="['/home']">Inicio</a>
    </li>
    <li class="breadcrumb-item">
      <a [routerLink]="['/ventas/directorio']">Directorio Empresarial</a>
    </li>
    <li class="breadcrumb-item active">Nuevo Prospeco</li>
  </ol>
</div>
<tabset [justified]="true">
  <tab heading="Información Principal" id="TapInfoPrincipal">
    <div class="dt-container  mat-elevation-z8">
      <div class="card-header">
        <em class="fa fa-user"></em> Informaci&oacute;n General
      </div>
      <div class="card-body">
        <form [formGroup]="formGeneral">
          <div #rating class="float-right">
            <rating [(ngModel)]="clf" [max]="maxRat" [readonly]="isReadonly" (onHover)="hoveringOver($event)"
              class="fa-2x text-warning" [ngModelOptions]="{standalone: true}" (onLeave)="resetStar()"
              [titles]="['A','AA','AAA']" stateOn="fa fa-star" stateOff="fa fa-star-o"></rating>
            <p><span>Clasificaci&oacute;n </span></p>
          </div>
          <mat-form-field>
            <input matInput formControlName="Empresa" name="empresa" placeholder="Empresa" autofocus />
          </mat-form-field>

          <body oncopy="return false" onpaste="return false">
            <mat-form-field>
              <input matInput formControlName="ValidarEmpresa" name="validarEmpresa" placeholder="Validar Empresa" />
              <mat-hint align="start">
                <strong *ngIf="formGeneral.controls.ValidarEmpresa.errors?.MachCompany" class="text-danger">Los datos
                  ingresados no coinciden, favor de verificar la informaci&oacute;n</strong>
              </mat-hint>
            </mat-form-field>
          </body>
          <div class="row">
            <div class="col-md-2 col-lg-2 col-sm-12">
              <mat-form-field>
                <mat-select placeholder="Giros" formControlName="Giros" (selectionChange)="getActividades()">
                  <mat-option *ngFor="let x of giros" [value]="x.id">
                    {{x.giroEmpresa}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-2 col-lg-2 col-sm-12">
              <mat-form-field>
                <mat-select placeholder="Actividades" formControlName="Actividades">
                  <mat-option *ngFor="let x of actividades" [value]="x.id">
                    {{x.actividadEmpresa}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-2 col-lg-2 col-sm-12">
              <mat-form-field>
                <input matInput type="number" formControlName="NoEmpleados" name="NoEmpleados" placeholder="# Empleados" (blur)="changeEmpleados()"
                  focus />
              </mat-form-field>
            </div>
            <div class="col-md-2 col-lg-2 col-sm-12">
              <mat-form-field>
                <mat-select placeholder="Tamaño" formControlName="Tamanio"  (selectionChange)="validarNoEmpleado()">
                  <mat-option *ngFor="let x of tamanioEmpresa" [value]="x.id">
                    {{x.tamanoEmpresa}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-2 col-lg-2 col-sm-12">
              <mat-form-field>
                <mat-select placeholder="Tipo" formControlName="Tipo">
                  <mat-option *ngFor="let x of tipo" [value]="x.id">
                    {{x.tipoEmpresa}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-2 col-lg-2 col-sm-12">
              <mat-form-field>
                <mat-select placeholder="Tipo Base" formControlName="TipoBase">
                  <mat-option *ngFor="let x of tipoBase" [value]="x.id">
                    {{x.tipoBase}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </form>
      </div>
    </div>
  </tab>
  <tab heading="Dirección / Sucursales" id="TapDirecciones">
    <div class="dt-container mat-elevation-z8">
      <div class="card-header">
        <em class="fa fa-map-marker"></em> Direcci&oacute;n / Sucursales
      </div>

      <div class="card-body">
        <div *ngIf="addDireccion">
          <form [formGroup]="formDirecciones">
            <div class="row">
              <div class="col-md-2 col-lg-2 col-sm-12">
                <mat-form-field>
                  <mat-select placeholder="Tipo Dirección" formControlName="TipoDireccion">
                    <mat-option *ngFor="let x of tipoDireccion" [value]="x.id">
                      {{x.tipoDireccion}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-2 col-lg-2 col-sm-12">
                <mat-form-field>
                  <input matInput formControlName="CodigoPostal" name="CodigoPostal" maxlength="5" #postalCode
                    placeholder="Código Postal" (keyup)="showForCP($event)" />
                  <mat-hint align="end">{{postalCode.value.length}} / 5</mat-hint>
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <mat-select placeholder="Paises" formControlName="Paises" (selectionChange)="getEstados()">
                    <mat-option *ngFor="let x of paises" [value]="x.id" (onSelectionChange)="auxPais = x.pais">
                      {{x.pais}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <mat-select placeholder="Estados" formControlName="Estados" (selectionChange)="getMunicipio()">
                    <mat-option *ngFor="let x of estados" [value]="x.id" (onSelectionChange)="auxEstado = x.estado">
                      {{x.estado}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <mat-select placeholder="Municipios" formControlName="Municipios" (selectionChange)="getColonias()">
                    <mat-option *ngFor="let x of municipios" [value]="x.id"
                      (onSelectionChange)="auxMunicipio = x.municipio">
                      {{x.municipio}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <mat-select placeholder="Colonias" formControlName="Colonias">
                    <mat-option *ngFor="let x of colonias" [value]="x.id"
                      (onSelectionChange)="auxColonia = x.colonia ; getCodigoPostal(x.cp)">
                      {{x.colonia}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-md-2">
                <mat-form-field>
                  <input matInput formControlName="Calle" name="Calle" placeholder="Calle" />
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <input matInput formControlName="Exterior" name="Exterior" placeholder="No. Exterior" />
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <input matInput formControlName="Interior" name="Interior" placeholder="No. Interior" />
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-form-field>
                  <textarea #message matInput maxlength="500" placeholder="Referencia / Comentario" rows="3"
                    formControlName="Referencia"></textarea>
                  <mat-hint align="start"><strong>Caracteres</strong></mat-hint>
                  <mat-hint align="end">{{message.value.length}} / 500</mat-hint>
                </mat-form-field>
              </div>
              <div class="col-md-2">
                <mat-slide-toggle class="text-success" [color]="warn" formControlName="Principal"
                  [disabled]="Principal">
                  Principal
                </mat-slide-toggle>
                <p></p>
                <mat-slide-toggle class="text-success" [color]="warn" formControlName="Activo">
                  Activo
                </mat-slide-toggle>
              </div>
            </div>

            <!-- Botones de funcion sobre Direcciones -->
            <div class="modal-footer">
              <button type="button" class="md-1 btn btn-xs btn-outline-danger"
                (click)="(addDireccion = ! addDireccion) ; cancelarDireccion()">Cancelar</button>
              <button type="button" [disabled]="!formDirecciones.valid" class="md-1 btn btn-xs btn-outline-success"
                (click)="AddDireccion()">{{textbtnDirecciones}}</button>
            </div>

          </form>
          <br>
        </div>
        <!-- Tabla de Direcciones -->
        <div class="butoonAction clearfix p-2 bg-light">
          <div class="contenedor">
            <div class="aling-div">
              <button class="mb-1 btn btn-xs btn-outline-primary margen" *ngIf="!addDireccion" container="body"
                placement="bottom" tooltip="Agregar" (click)="addDireccion = true; textbtnDirecciones = 'Agregar'">
                <em class="fa fa-plus"></em>
              </button>
            </div>
            <div class="aling-div" *ngIf="!EditDireccion">
              <button *ngIf="DireccionesNew.length > 0" class="mb-1 btn btn-xs margen" container="body"
                placement="bottom" tooltip="Editar" [disabled]="!elementD"
                [ngClass]="(!elementD) ? 'disabled' : 'btn-outline-primary'"
                (click)="UpDireccion();  textbtnDirecciones = 'Editar'">
                <em class="fa fa-pencil"></em>
              </button>
              <button *ngIf="DireccionesNew.length > 0" class="mb-1 btn btn-xs margen" container="body"
                placement="bottom" tooltip="Eliminar" [disabled]="!elementD"
                [ngClass]="(!elementD) ? 'disabled' : 'btn-outline-danger'" (click)="DtDireccion()">
                <em class="fa fa-trash"></em>
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="DireccionesNew.length > 0">
          <div class="card media">
            <div class="card-body mat-elevation-z8">
              <div class="row" #tableDirecciones>
                <div class="col-sm-12 col-md-12 table-responsive clearfix">
                  <div>
                    <span *ngIf="config.paging" class="float-right">Total Registros: {{registrosD}}</span>
                  </div>
                  <table id="direccionesNuevas" ngClass="{{config.className || ''}}" role="grid" style="width: 100%;">
                    <thead>
                      <tr>
                        <th *ngFor="let column of columnsD" ngClass="{{column.className || ''}}">
                          {{column.title | uppercase}}
                        </th>
                      </tr>
                      <tr *ngIf="showFilterRowD">
                        <td *ngFor="let column of columnsD">
                          <input *ngIf="column.filtering" placeholder="{{column.filtering.placeholder}}"
                            [ngTableFiltering]="column.filtering" (tableChanged)="onChangeTableD(config)"
                            class="form-control form-control-sm" id="{{column.name}}">
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let rowd of rowsD; let i=index" (click)="onCellClickD(rowd, rowd.idAux)"
                        [class.selected]="rowd.selectedD">
                        <td class="text-center">{{rowd.tipoDireccion}}</td>
                        <td class="text-center">{{rowd.codigoPostal}}</td>
                        <td class="text-center">{{rowd.pais}}</td>
                        <td class="text-center">{{rowd.estado}}</td>
                        <td>{{rowd.municipio}}</td>
                        <td>{{rowd.colonia}}</td>
                        <td>{{rowd.calle}}</td>
                        <td class="text-right"> {{rowd.numeroExterior}}</td>
                        <td class="text-right"> {{rowd.numeroInterior}}</td>
                        <td>
                          <!-- <small *ngIf="rowd.referencia?.length < 30 else toLengthRF">
                                {{rowd.referencia}}
                              </small>
                              <ng-template #toLengthRF>
                                <small placement="bottom" tooltip="{{rowd.referencia}}"> {{rowd.referencia | slice:0:30 }}
                                  ...
                                </small>
                              </ng-template> -->
                          <small>
                            {{rowd.referencia | uppercase}}
                          </small>
                        </td>
                        <td class="text-center">
                          <small *ngIf="rowd.esPrincipal else Inactivo">
                            SI
                          </small>
                          <ng-template #Inactivo>
                            <small>NO</small>
                          </ng-template>
                        </td>
                        <td class="text-center">
                          <small *ngIf="rowd.activo else IsActivo">
                            SI
                          </small>
                          <ng-template #IsActivo>
                            <small>NO</small>
                          </ng-template>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <mat-divider></mat-divider>
                  <div class="text-right">
                    <pagination *ngIf="config.paging" class="pagination-sm" [(ngModel)]="pageD" [totalItems]="lengthD"
                      [itemsPerPage]="itemsPerPage" [maxSize]="maxSize" [boundaryLinks]="true" [rotate]="false"
                      (pageChanged)="onChangeTableD(config, $event)" (numPages)="numPagesD = $event">
                    </pagination>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </tab>
  <tab heading="Teléfonos" id="TapTelefonos">
    <div class="dt-container mat-elevation-z8">
      <div class="card-header">
        <em class="fa fa-phone"></em>Tel&eacute;fonos
      </div>
      <div class="card-body">
        <div *ngIf="addTelefono">
          <form [formGroup]="formTelefonos">
            <div class="row">
              <div class="col-md-4 col-lg-4 col-sm-12">
                <mat-form-field>
                  <mat-select placeholder="Dirección" formControlName="TelDireccion">
                    <mat-option *ngFor="let x of DireccionesNew; let i=index " [value]="x.idAux">
                      <span
                        *ngIf="(x?.calle.length + x?.municipio.length + x?.codigoPostal.length) < 42 else toLengthDr">
                        {{x.calle}} - {{x.municipio}} - <strong>{{x.codigoPostal}}</strong>
                      </span>
                      <ng-template #toLengthDr>
                        <span container="body" placement="bottom"
                          tooltip="{{x.calle}} - {{x.municipio}} - {{x.codigoPostal}}">
                          {{x.calle +' - '+ x.municipio +' - '+ x.codigoPostal | slice:0:42}} ...</span>
                      </ng-template>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4 col-lg-4 col-sm-12">
                <mat-form-field>
                  <mat-select placeholder="Tipo Teléfono" formControlName="TipoTelefono"
                    (selectionChange)="getTipoTelefono()">
                    <mat-option *ngFor="let x of tipoTelefonos" [value]="x.id">
                      <span>{{x.tipo}}</span>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-12 form-row">
                <div class="col-md-2 col-lg-2 col-sm-12">
                  <mat-form-field>
                    <span matPrefix>+&nbsp;</span>
                    <input matInput type="phone" formControlName="LadaPais" maxlength="3" name="LadaPais"
                      placeholder="País" />
                  </mat-form-field>
                </div>
                <div class="col-md-2 col-lg-2 col-sm-12">
                  <mat-form-field>
                    <input matInput type="phone" formControlName="Lada" maxlength="3" name="Lada" placeholder="Lada" />
                  </mat-form-field>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-12">
                  <mat-form-field>
                    <input matInput type="phone" formControlName="Numero" maxlength="8" name="Numero"
                      placeholder="Número" />
                  </mat-form-field>
                </div>
                <div class="col-md-2 col-lg-2 col-sm-12" *ngIf="esOficina === 4">
                  <mat-form-field>
                    <input matInput type="phone" formControlName="Extension" maxlength="5" name="Extension"
                      placeholder="Ext." />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-md-2 col-lg-2 col-sm-12">
                <mat-slide-toggle class="text-success" [color]="warn" formControlName="Principal"
                  [disabled]="PrincipalT">
                  Principal
                </mat-slide-toggle>
                <p></p>
                <mat-slide-toggle class="text-success" [color]="warn" formControlName="Activo">
                  Activo
                </mat-slide-toggle>
              </div>
            </div>
            <br>
            <div class="modal-footer">
              <button type="button" class="md-1 btn btn-xs btn-outline-danger"
                (click)="(addTelefono = ! addTelefono) ; cancelarTelefono()">Cancelar</button>
              <button type="button" [disabled]="!formTelefonos.valid" class="md-1 btn btn-xs btn-outline-success"
                (click)="AddTelefono()">{{textbtnTelefono}}</button>
            </div>
          </form>
        </div>
        <div class="butoonAction clearfix p-2 bg-light">
          <div class="contenedor">
            <div class="aling-div">
              <button class="mb-1 btn btn-xs btn-outline-primary margen" *ngIf="!addTelefono" container="body"
                placement="bottom" tooltip="Agregar" (click)="addTelefono = true; textbtnTelefono = 'Agregar'">
                <em class="fa fa-plus"></em>
              </button>
            </div>
            <div class="aling-div" *ngIf="!EditTelefono">
              <button *ngIf="TelefonosNew.length > 0" class="mb-1 btn btn-xs margen" container="body" placement="bottom"
                tooltip="Editar" [disabled]="!elementT" [ngClass]="(!elementT)? 'disabled' : 'btn-outline-primary'"
                (click)="UpTelefono(); textbtnTelefono = 'Editar'">
                <em class="fa fa-pencil"></em>
              </button>
              <button *ngIf="TelefonosNew.length > 0" class="mb-1 btn btn-xs margen" container="body" placement="bottom"
                tooltip="Eliminar" [disabled]="!elementT" [ngClass]="(!elementT)? 'disabled' : 'btn-outline-danger'"
                (click)="DtTelefono()">
                <em class="fa fa-trash"></em>
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="TelefonosNew.length > 0">
          <div class="card media">
            <div class="card-body mat-elevation-z8">
              <div class="row" TableTelefonos>
                <div class="col-sm-12 col-md-12 table-responsive clearfix">
                  <div>
                    <span *ngIf="config.paging" class="float-right">Total Registros: {{registrosT}}</span>
                  </div>
                  <table id="telefonosNuevos" ngClass="{{config.className || ''}}" role="grid" style="width: 100%;">
                    <thead>
                      <tr>
                        <th *ngFor="let column of columnsT" ngClass="{{column.className || ''}}">
                          {{column.title | uppercase}}
                        </th>
                      </tr>
                      <tr *ngIf="showFilterRowT">
                        <td *ngFor="let column of columnsT">
                          <input *ngIf="column.filtering" placeholder="{{column.filtering.placeholder}}"
                            [ngTableFiltering]="column.filtering" (tableChanged)="onChangeTableT(config)"
                            class="form-control form-control-sm" id="{{column.name}}">
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let rowt of rowsT; let i=index" (click)="onCellClickT(rowt, rowt.idAux)"
                        [class.selected]="rowt.selectedT">
                        <td class="text-center">{{rowt.calle}}</td>
                        <td class="text-center">{{rowt.tTelefono}}</td>
                        <td class="text-center"> +{{rowt.clavePais}} ({{rowt.claveLada}}) {{rowt.telefono |
                      slice:0:4}}-{{rowt.telefono | slice:4:8}}</td>
                        <td class="text-center">{{rowt.extension}}</td>
                        <td class="text-center">
                          <small *ngIf="rowt.esPrincipal else InactivoT">
                            SI
                          </small>
                          <ng-template #InactivoT>
                            <small>NO</small>
                          </ng-template>
                        </td>
                        <td class="text-center">
                          <small *ngIf="rowt.activo else IsActivoT">
                            SI
                          </small>
                          <ng-template #IsActivoT>
                            <small>NO</small>
                          </ng-template>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <mat-divider></mat-divider>
                  <div class="text-right">
                    <pagination *ngIf="config.paging" class="pagination-sm" [(ngModel)]="pageT" [totalItems]="lengthT"
                      [itemsPerPage]="itemsPerPage" [maxSize]="maxSize" [boundaryLinks]="true" [rotate]="false"
                      (pageChanged)="onChangeTableT(config, $event)" (numPages)="numPagesT = $event">
                    </pagination>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </tab>
  <tab heading="Correo Electrónico" id="TapCorreo">
    <div class="dt-container mat-elevation-z8">
      <div class="card-header">
        <em class="fa fa-envelope-o"></em>Correo Electr&oacute;nico
      </div>
      <div class="card-body">
        <div *ngIf="addCorreo">
          <form [formGroup]="formCorreos">
            <div class="row">
              <div class="col-md-6 col-lg-6 col-sm-12">
                <mat-form-field>
                  <mat-select placeholder="Dirección" formControlName="EmailDireccion">
                    <mat-option *ngFor="let x of DireccionesNew; " [value]="x.idAux">
                      <span
                        *ngIf="(x?.calle.length + x?.municipio.length + x?.codigoPostal.length) < 42 else toLengthDr">
                        {{x.calle}} - {{x.municipio}} - <strong>{{x.codigoPostal}}</strong>
                      </span>
                      <ng-template #toLengthDr>
                        <span container="body" placement="bottom"
                          tooltip="{{x.calle}} - {{x.municipio}} - {{x.codigoPostal}}">
                          {{x.calle +' - '+ x.municipio +' - '+ x.codigoPostal | slice:0:42}} ...</span>
                      </ng-template>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-12">
                <mat-form-field>
                  <input matInput type="email" formControlName="Email" maxlength="100" name="Email"
                    placeholder="Correo Electronico" />
                </mat-form-field>
              </div>
            </div>
            <br>
            <div class="modal-footer">
              <button type="button" class="md-1 btn btn-xs btn-outline-danger"
                (click)="(addCorreo = ! addCorreo) ; cancelarCorreo()">Cancelar</button>
              <button type="button" [disabled]="!formCorreos.valid" class="md-1 btn btn-xs btn-outline-success"
                (click)="AddEmail()">{{textbtnCorreo}}</button>
            </div>
          </form>
        </div>
        <div class="butoonAction clearfix p-2 bg-light">
          <div class="contenedor">
            <div class="aling-div">
              <button class="mb-1 btn btn-xs btn-outline-primary margen" *ngIf="!addCorreo" container="body"
                placement="bottom" tooltip="Agregar" (click)="addCorreo = true; textbtnCorreo = 'Agregar'">
                <em class="fa fa-plus"></em>
              </button>
            </div>
            <div class="aling-div" *ngIf="!EditCorreo">
              <button *ngIf="CorreosNew.length > 0" class="mb-1 btn btn-xs margen" container="body" placement="bottom"
                tooltip="Editar" [disabled]="!elementC" [ngClass]="(!elementC) ? 'disabled' : 'btn-outline-primary'"
                (click)="UpEmail(); textbtnCorreo = 'Editar'">
                <em class="fa fa-pencil"></em>
              </button>
              <button *ngIf="CorreosNew.length > 0" class="mb-1 btn btn-xs margen" container="body" placement="bottom"
                placement="bottom" tooltip="Eliminar" [disabled]="!elementC"
                [ngClass]="(!elementC)? 'disabled' : 'btn-outline-danger'" (click)="DtEmail()">
                <em class="fa fa-trash"></em>
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="CorreosNew.length > 0">
          <div class="card media">
            <div class="card-body mat-elevation-z8">
              <div class="row" #tableCorreos>
                <div class="col-sm-12 col-md-12 table-responsive clearfix">
                  <div>
                    <span *ngIf="config.paging" class="float-right">Total Registros: {{registrosC}}</span>
                  </div>
                  <table id="CorreosNuevos" ngClass="{{config.className || ''}}" role="grid" style="width: 100%;">
                    <thead>
                      <tr>
                        <th *ngFor="let column of columnsC" ngClass="{{column.className || ''}}">
                          {{column.title | uppercase}}
                        </th>
                      </tr>
                      <tr *ngIf="showFilterRowC">
                        <td *ngFor="let column of columnsC">
                          <input *ngIf="column.filtering" placeholder="{{column.filtering.placeholder}}"
                            [ngTableFiltering]="column.filtering" (tableChanged)="onChangeTableC(config)"
                            class="form-control form-control-sm" id="{{column.name}}">
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let rowc of rowsC; let i=index" (click)="onCellClickC(rowc, rowc.idAux)"
                        [class.selected]="rowc.selectedC">
                        <td class="text-center">{{rowc.calle}}</td>
                        <td class="text-center">{{rowc.email}}</td>
                        <!-- <td class="text-center">
                      <small *ngIf="rowc.activo else InactivoC">
                        SI
                      </small>
                      <ng-template #InactivoC>
                        <small>NO</small>
                      </ng-template>
                    </td> -->
                        <!-- <td class="text-center">
                      <small *ngIf="rowc.activo else IsActivoC">
                        SI
                      </small>
                      <ng-template #IsActivoC>
                        <small>NO</small>
                      </ng-template>
                    </td> -->
                      </tr>
                    </tbody>
                  </table>
                  <mat-divider></mat-divider>
                  <div class="text-right">
                    <pagination *ngIf="config.paging" class="pagination-sm" [(ngModel)]="pageC" [totalItems]="lengthC"
                      [itemsPerPage]="itemsPerPage" [maxSize]="maxSize" [boundaryLinks]="true" [rotate]="false"
                      (pageChanged)="onChangeTableC(config, $event)" (numPages)="numPagesC = $event">
                    </pagination>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </tab>
  <tab heading="Contactos" id="TapContactos">
    <div class="dt-container mat-elevation-z8">
      <div class="card-header">
        <em class="fa fa-users"></em> Contactos
      </div>
      <div class="card-body">
        <div *ngIf="addContacto">
          <form [formGroup]="formContactos">
            <div class="row" #DireccionContacto>
              <div class="col-sm-6 col-ms-6 col-lg-6">
                <mat-form-field>
                  <mat-select placeholder="Dirección" formControlName="ContactoDireccion">
                    <mat-option *ngFor="let x of DireccionesNew; let i=index " [value]="x.idAux">
                      <span
                        *ngIf="(x?.calle.length + x?.municipio.length + x?.codigoPostal.length) < 42 else toLengthDr">
                        {{x.calle}} - {{x.municipio}} - <strong>{{x.codigoPostal}}</strong>
                      </span>
                      <ng-template #toLengthDr>
                        <span container="body" placement="bottom"
                          tooltip="{{x.calle}} - {{x.municipio}} - {{x.codigoPostal}}">
                          {{x.calle +' - '+ x.municipio +' - '+ x.codigoPostal | slice:0:42}} ...</span>
                      </ng-template>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row" #DatosContacto>
              <div class="col-sm-12 col-md-3 col-lg-3">
                <mat-form-field>
                  <input matInput formControlName="Nombre" placeholder="Nombre (s)" />
                </mat-form-field>
              </div>
              <div class="col-sm-12 col-md-3 col-lg-3">
                <mat-form-field>
                  <input matInput formControlName="ApellidoPaterno" placeholder="Apellido Paterno" />
                </mat-form-field>
              </div>
              <div class="col-sm-12 col-md-3 col-lg-3">
                <mat-form-field>
                  <input matInput formControlName="ApellidoMaterno" placeholder="Apellido Materno" />
                </mat-form-field>
              </div>
              <div class="col-sm-12 col-md-3 col-lg-3">
                <mat-form-field>
                  <input matInput formControlName="Puesto" placeholder="Puesto" />
                </mat-form-field>
              </div>
            </div>
            <div class="row" #TelefonoContacto>
              <div class="col-md-4 col-lg-4 col-sm-12">
                <mat-form-field>
                  <mat-select placeholder="Tipo Teléfono" formControlName="TipoTelefono"
                    (selectionChange)="getTipoTelefonoContacto()">
                    <mat-option *ngFor="let x of tipoTelefonos" [value]="x.id">
                      <span>{{x.tipo}}</span>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-12 form-row">
                <div class="col-md-2 col-lg-2 col-sm-12">
                  <mat-form-field>
                    <span matPrefix>+&nbsp;</span>
                    <input matInput type="phone" formControlName="LadaPais" maxlength="3" name="LadaPais-Contacto"
                      placeholder="País" />
                  </mat-form-field>
                </div>
                <div class="col-md-2 col-lg-2 col-sm-12">
                  <mat-form-field>
                    <input matInput type="phone" formControlName="Lada" maxlength="3" name="Lada-Contacto"
                      placeholder="Lada" />
                  </mat-form-field>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-12">
                  <mat-form-field>
                    <input matInput type="phone" formControlName="Numero" maxlength="8" name="Numero-Contacto"
                      placeholder="Número" />
                  </mat-form-field>
                </div>
                <div class="col-md-2 col-lg-2 col-sm-12" *ngIf="esOficinaContacto === 4">
                  <mat-form-field>
                    <input matInput type="phone" formControlName="Extension" maxlength="5" name="Extension-Contacto"
                      placeholder="Ext." />
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="row" #Emailcontacto>
              <div class="col-sm -12 col-md-4 col-lg-4">
                <mat-form-field>
                  <input matInput type="email" formControlName="Email" maxlength="100" name="Email"
                    placeholder="Correo Electronico" />
                </mat-form-field>
              </div>
            </div>
            <br>
            <div class="modal-footer">
              <button type="button" class="md-1 btn btn-xs btn-outline-danger"
                (click)="(addContacto = ! addContacto) ; cancelarContacto()">Cancelar</button>
              <button type="button" [disabled]="!formContactos.valid" class="md-1 btn btn-xs btn-outline-success"
                (click)="AddContacto()">{{textbtnContacto}}</button>
            </div>
          </form>
        </div>
        <div class="butoonAction clearfix p-2 bg-light">
          <div class="contenedor">
            <div class="aling-div">
              <button class="mb-1 btn btn-xs btn-outline-primary margen" *ngIf="!addContacto" container="body"
                placement="bottom" tooltip="Agregar" (click)="addContacto = true; textbtnContacto = 'Agregar'">
                <em class="fa fa-plus"></em>
              </button>
            </div>
            <div class="aling-div" *ngIf="!EditContacto">
              <button *ngIf="ContactosNew.length > 0" class="mb-1 btn btn-xs margen" container="body" placement="bottom"
                tooltip="Editar" [disabled]="!elementCn" [ngClass]="(!elementCn) ? 'disabled' : 'btn-outline-primary'"
                (click)="UpContactos(); textbtnContacto = 'Editar'">
                <em class="fa fa-pencil"></em>
              </button>
              <button *ngIf="ContactosNew.length > 0" class="mb-1 btn btn-xs margen" container="body" placement="bottom"
                tooltip="Eliminar" [disabled]="!elementCn" [ngClass]="(!elementCn) ? 'disabled' : 'btn-outline-danger'"
                (click)="DtContacto()">
                <em class="fa fa-trash"></em>
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="ContactosNew.length > 0">
          <div class="card media">
            <div class="card-body mat-elevation-z8">
              <div class="row" #TableContactos>
                <div class="col-sm-12 col-md-12 table-responsive clearfix">
                  <div>
                    <span *ngIf="config.paging" class="float-right">Total Registros: {{registrosCn}}</span>
                  </div>
                  <table id="ContactosNuevos" ngClass="{{config.className || ''}}" role="grid" style="width: 100%;">
                    <thead>
                      <tr>
                        <th *ngFor="let column of columnsCn" ngClass="{{column.className || ''}}">
                          {{column.title | uppercase}}
                        </th>
                      </tr>
                      <tr *ngIf="showFilterRowCn">
                        <td *ngFor="let column of columnsCn">
                          <input *ngIf="column.filtering" placeholder="{{column.filtering.placeholder}}"
                            [ngTableFiltering]="column.filtering" (tableChanged)="onChangeTableCn(config)"
                            class="form-control form-control-sm" id="{{column.name}}">
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let rowcn of rowsCn; let i=index" (click)="onCellClickCn(rowcn, rowcn.idAux)"
                        [class.selected]="rowcn.selectedCn">
                        <td class="text-center">{{rowcn.calle}}</td>
                        <td class="text-center">{{rowcn.nombre}} {{rowcn.apellidoPaterno}} {{rowcn.apellidoMaterno}}
                        </td>
                        <td class="text-center">{{rowcn.puesto}}</td>
                        <td class="text-center">{{rowcn.tipoTelefonoAux}}</td>
                        <td class="text-center"> +{{rowcn.telefonos[0].clavePais}} ({{rowcn.telefonos[0].claveLada}})
                          {{rowcn.telefonos[0].telefono |
                      slice:0:4}}-{{rowcn.telefonos[0].telefono | slice:4:8}}</td>
                        <td class="text-center">{{rowcn.emails[0].email}}</td>
                      </tr>
                    </tbody>
                  </table>
                  <mat-divider></mat-divider>
                  <div class="text-right">
                    <pagination *ngIf="config.paging" class="pagination-sm" [(ngModel)]="pageCn" [totalItems]="lengthCn"
                      [itemsPerPage]="itemsPerPage" [maxSize]="maxSize" [boundaryLinks]="true" [rotate]="false"
                      (pageChanged)="onChangeTableCn(config, $event)" (numPages)="numPagesCn = $event">
                    </pagination>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </tab>
</tabset>
<br>
<div class="form-group">
  <div class="row">
    <div class="col-lg-6 col-md-6 col-sm-12">
      <button type="reset" [disabled]="loading" [ngClass]="loading ? 'disabled': 'btn-outline-danger'"
        class="btn btn-block" [routerLink]="['/ventas/directorio']">Cancel</button>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12">
      <button type="submit" *ngIf="!loading"
        [disabled]="!formGeneral.valid || DireccionesNew.length === 0 || TelefonosNew.length === 0 || CorreosNew.length === 0 || ContactosNew.length === 0"
        [ngClass]="!formGeneral.valid || DireccionesNew.length === 0 || TelefonosNew.length === 0 || CorreosNew.length === 0 || ContactosNew.length === 0 ? 'disabled' : 'btn-outline-success'"
        class="btn btn-block" (click)="GuardarProspecto()">Guardar</button>
      <img *ngIf="loading"
        src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==">
    </div>
  </div>
</div>


<!-- Mensajes informativos -->
<toaster-container toaster-options="{'toaster-id': 1 }" [toasterconfig]="toasterconfig"></toaster-container>
